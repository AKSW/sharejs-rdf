var WEB=!0;!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;try{b=window}catch(c){b=self}b.SparkMD5=a()}}(function(){"use strict";var a=function(a,b){return a+b&4294967295},b=function(b,c,d,e,f,g){return c=a(a(c,b),a(e,g)),a(c<<f|c>>>32-f,d)},c=function(a,c,d,e,f,g,h){return b(c&d|~c&e,a,c,f,g,h)},d=function(a,c,d,e,f,g,h){return b(c&e|d&~e,a,c,f,g,h)},e=function(a,c,d,e,f,g,h){return b(c^d^e,a,c,f,g,h)},f=function(a,c,d,e,f,g,h){return b(d^(c|~e),a,c,f,g,h)},g=function(b,g){var h=b[0],i=b[1],j=b[2],k=b[3];h=c(h,i,j,k,g[0],7,-680876936),k=c(k,h,i,j,g[1],12,-389564586),j=c(j,k,h,i,g[2],17,606105819),i=c(i,j,k,h,g[3],22,-1044525330),h=c(h,i,j,k,g[4],7,-176418897),k=c(k,h,i,j,g[5],12,1200080426),j=c(j,k,h,i,g[6],17,-1473231341),i=c(i,j,k,h,g[7],22,-45705983),h=c(h,i,j,k,g[8],7,1770035416),k=c(k,h,i,j,g[9],12,-1958414417),j=c(j,k,h,i,g[10],17,-42063),i=c(i,j,k,h,g[11],22,-1990404162),h=c(h,i,j,k,g[12],7,1804603682),k=c(k,h,i,j,g[13],12,-40341101),j=c(j,k,h,i,g[14],17,-1502002290),i=c(i,j,k,h,g[15],22,1236535329),h=d(h,i,j,k,g[1],5,-165796510),k=d(k,h,i,j,g[6],9,-1069501632),j=d(j,k,h,i,g[11],14,643717713),i=d(i,j,k,h,g[0],20,-373897302),h=d(h,i,j,k,g[5],5,-701558691),k=d(k,h,i,j,g[10],9,38016083),j=d(j,k,h,i,g[15],14,-660478335),i=d(i,j,k,h,g[4],20,-405537848),h=d(h,i,j,k,g[9],5,568446438),k=d(k,h,i,j,g[14],9,-1019803690),j=d(j,k,h,i,g[3],14,-187363961),i=d(i,j,k,h,g[8],20,1163531501),h=d(h,i,j,k,g[13],5,-1444681467),k=d(k,h,i,j,g[2],9,-51403784),j=d(j,k,h,i,g[7],14,1735328473),i=d(i,j,k,h,g[12],20,-1926607734),h=e(h,i,j,k,g[5],4,-378558),k=e(k,h,i,j,g[8],11,-2022574463),j=e(j,k,h,i,g[11],16,1839030562),i=e(i,j,k,h,g[14],23,-35309556),h=e(h,i,j,k,g[1],4,-1530992060),k=e(k,h,i,j,g[4],11,1272893353),j=e(j,k,h,i,g[7],16,-155497632),i=e(i,j,k,h,g[10],23,-1094730640),h=e(h,i,j,k,g[13],4,681279174),k=e(k,h,i,j,g[0],11,-358537222),j=e(j,k,h,i,g[3],16,-722521979),i=e(i,j,k,h,g[6],23,76029189),h=e(h,i,j,k,g[9],4,-640364487),k=e(k,h,i,j,g[12],11,-421815835),j=e(j,k,h,i,g[15],16,530742520),i=e(i,j,k,h,g[2],23,-995338651),h=f(h,i,j,k,g[0],6,-198630844),k=f(k,h,i,j,g[7],10,1126891415),j=f(j,k,h,i,g[14],15,-1416354905),i=f(i,j,k,h,g[5],21,-57434055),h=f(h,i,j,k,g[12],6,1700485571),k=f(k,h,i,j,g[3],10,-1894986606),j=f(j,k,h,i,g[10],15,-1051523),i=f(i,j,k,h,g[1],21,-2054922799),h=f(h,i,j,k,g[8],6,1873313359),k=f(k,h,i,j,g[15],10,-30611744),j=f(j,k,h,i,g[6],15,-1560198380),i=f(i,j,k,h,g[13],21,1309151649),h=f(h,i,j,k,g[4],6,-145523070),k=f(k,h,i,j,g[11],10,-1120210379),j=f(j,k,h,i,g[2],15,718787259),i=f(i,j,k,h,g[9],21,-343485551),b[0]=a(h,b[0]),b[1]=a(i,b[1]),b[2]=a(j,b[2]),b[3]=a(k,b[3])},h=function(a){var b,c=[];for(b=0;64>b;b+=4)c[b>>2]=a.charCodeAt(b)+(a.charCodeAt(b+1)<<8)+(a.charCodeAt(b+2)<<16)+(a.charCodeAt(b+3)<<24);return c},i=function(a){var b,c=[];for(b=0;64>b;b+=4)c[b>>2]=a[b]+(a[b+1]<<8)+(a[b+2]<<16)+(a[b+3]<<24);return c},j=function(a){var b,c,d,e,f,i,j=a.length,k=[1732584193,-271733879,-1732584194,271733878];for(b=64;j>=b;b+=64)g(k,h(a.substring(b-64,b)));for(a=a.substring(b-64),c=a.length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b=0;c>b;b+=1)d[b>>2]|=a.charCodeAt(b)<<(b%4<<3);if(d[b>>2]|=128<<(b%4<<3),b>55)for(g(k,d),b=0;16>b;b+=1)d[b]=0;return e=8*j,e=e.toString(16).match(/(.*?)(.{0,8})$/),f=parseInt(e[2],16),i=parseInt(e[1],16)||0,d[14]=f,d[15]=i,g(k,d),k},k=function(a){var b,c,d,e,f,h,j=a.length,k=[1732584193,-271733879,-1732584194,271733878];for(b=64;j>=b;b+=64)g(k,i(a.subarray(b-64,b)));for(a=j>b-64?a.subarray(b-64):new Uint8Array(0),c=a.length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b=0;c>b;b+=1)d[b>>2]|=a[b]<<(b%4<<3);if(d[b>>2]|=128<<(b%4<<3),b>55)for(g(k,d),b=0;16>b;b+=1)d[b]=0;return e=8*j,e=e.toString(16).match(/(.*?)(.{0,8})$/),f=parseInt(e[2],16),h=parseInt(e[1],16)||0,d[14]=f,d[15]=h,g(k,d),k},l=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],m=function(a){var b,c="";for(b=0;4>b;b+=1)c+=l[a>>8*b+4&15]+l[a>>8*b&15];return c},n=function(a){var b;for(b=0;b<a.length;b+=1)a[b]=m(a[b]);return a.join("")},o=function(a){return n(j(a))},p=function(){this.reset()};return"5d41402abc4b2a76b9719d911017c592"!==o("hello")&&(a=function(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}),p.prototype.append=function(a){return/[\u0080-\uFFFF]/.test(a)&&(a=unescape(encodeURIComponent(a))),this.appendBinary(a),this},p.prototype.appendBinary=function(a){this._buff+=a,this._length+=a.length;var b,c=this._buff.length;for(b=64;c>=b;b+=64)g(this._state,h(this._buff.substring(b-64,b)));return this._buff=this._buff.substr(b-64),this},p.prototype.end=function(a){var b,c,d=this._buff,e=d.length,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(b=0;e>b;b+=1)f[b>>2]|=d.charCodeAt(b)<<(b%4<<3);return this._finish(f,e),c=a?this._state:n(this._state),this.reset(),c},p.prototype._finish=function(a,b){var c,d,e,f=b;if(a[f>>2]|=128<<(f%4<<3),f>55)for(g(this._state,a),f=0;16>f;f+=1)a[f]=0;c=8*this._length,c=c.toString(16).match(/(.*?)(.{0,8})$/),d=parseInt(c[2],16),e=parseInt(c[1],16)||0,a[14]=d,a[15]=e,g(this._state,a)},p.prototype.reset=function(){return this._buff="",this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},p.prototype.destroy=function(){delete this._state,delete this._buff,delete this._length},p.hash=function(a,b){/[\u0080-\uFFFF]/.test(a)&&(a=unescape(encodeURIComponent(a)));var c=j(a);return b?c:n(c)},p.hashBinary=function(a,b){var c=j(a);return b?c:n(c)},p.ArrayBuffer=function(){this.reset()},p.ArrayBuffer.prototype.append=function(a){var b,c=this._concatArrayBuffer(this._buff,a),d=c.length;for(this._length+=a.byteLength,b=64;d>=b;b+=64)g(this._state,i(c.subarray(b-64,b)));return this._buff=d>b-64?c.subarray(b-64):new Uint8Array(0),this},p.ArrayBuffer.prototype.end=function(a){var b,c,d=this._buff,e=d.length,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(b=0;e>b;b+=1)f[b>>2]|=d[b]<<(b%4<<3);return this._finish(f,e),c=a?this._state:n(this._state),this.reset(),c},p.ArrayBuffer.prototype._finish=p.prototype._finish,p.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},p.ArrayBuffer.prototype.destroy=p.prototype.destroy,p.ArrayBuffer.prototype._concatArrayBuffer=function(a,b){var c=a.length,d=new Uint8Array(c+b.byteLength);return d.set(a),d.set(new Uint8Array(b),c),d},p.ArrayBuffer.hash=function(a,b){var c=k(new Uint8Array(a));return b?c:n(c)},p}),function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a){return"http://www.w3.org/2001/XMLSchema#"+a}function e(a){return{writable:!1,configurable:!1,enumerable:!1,value:a}}function f(a){return{configurable:!1,enumerable:!1,get:a}}function g(a,b){return"a"==a?"http://www.w3.org/1999/02/22-rdf-syntax-ns#type":(a=a.replace("$",":"),-1==a.indexOf(":")&&(a=r.resolve(a,b)||a),a)}function h(a,b){return("0000"+a).substr(-(b||2))}function i(a){for(var b="",c=!1,d=0,e=a.length;e>d;){var f=d++;if(c)c=!c;else{var g=a.charCodeAt(f);if(g>=55296&&56319>=g){var h=a.charCodeAt(f+1);g=1024*(g-55296)+(h-56320)+65536,c=!0}if(g>1114111)throw new Error("Char out of range");var i="00000000".concat(new Number(g).toString(16).toUpperCase());if(g>=65536)b+="\\U"+i.slice(-8);else if(g>=127||31>=g)switch(g){case 9:b+="\\t";break;case 10:b+="\\n";break;case 13:b+="\\r";break;default:b+="\\u"+i.slice(-4)}else switch(g){case 34:b+='\\"';break;case 92:b+="\\\\";break;default:b+=a.charAt(f)}}}return b}function j(a,b,c){if(!a.id)var a=a.ref();return a.graphify(c)}function k(b){function c(a){var b;return-1!==(b=a.toString().indexOf(":"))&&"/"===a[b+1]?a:i.resolve(a.toString())||a}function d(a){return"string"==typeof a?r.createNamedNode(c(a)):a}function e(a,b,f){if("@"!=b[0]&&"$"!=b[0]&&"function"!=typeof f&&"undefined"!=typeof f){var j=f.id||f.$id||f["@id"];if(f.nodeType||j||"string"==typeof f||s.call(f),j=j||f.id,Array.isArray(f)||f.$list||f["@list"]){var l=f.$list||f["@list"];if(l&&((f=l).list=!0),f.list)if(0==f.length)h.add(r.createTriple(d(a),d(g(b,i)),o));else{var m=r.createBlankNode();h.add(r.createTriple(d(a),d(g(b,i)),m)),f.forEach(function(a,b){e(m,p,a);var c=r.createBlankNode();h.add(r.createTriple(m,r.createNamedNode(q),b==f.length-1?r.createNamedNode(o):c)),m=c})}else f.forEach(function(d){e(c(a),c(b),d)})}else j?(h.add(r.createTriple(d(a),d(g(b,i)),d(j))),h.merge(k.call(f,i))):h.add("string"==typeof f?r.createTriple(d(a),d(g(b,i)),d(f)):r.createTriple(d(a),d(g(b,i)),f))}}var f=this,h=r.createGraph(),i=r.createProfile();n.loadRequiredPrefixMap(i),f.aliasmap&&i.importProfile(f.aliasmap,!0),b&&i.importProfile(b,!0);var j=f.$context||f["@context"];if(j)for(var l in j)i.setPrefix(l,j[l]);if("object"==typeof id)throw new Error("Not an object: "+a("util").inspect(this));return Object.keys(f).forEach(function(a){e(f.id,a,f[a])}),h}var l=a("./RDFEnvironment.js").RDFEnvironment,m=a("./RDFNode.js").RDFNodeEquals,n=a("./Default.js"),o="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil",p="http://www.w3.org/1999/02/22-rdf-syntax-ns#first",q="http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",r=c.environment=new l;Object.defineProperty(String.prototype,"profile",e(r)),a("./Default.js").loadDefaultPrefixMap(r),c.graphify=j;var s=c.ref=function C(a){return Object.defineProperties(this,{id:e(a?"function"==typeof a.resolve?a.resolve():a:r.createBlankNode().toString()),n3:e(function(b,c){c=c||"\n	";var d=[],e=this,f=new Profile;return n.loadRequiredPrefixMap(f),e.aliasmap&&f.importProfile(e.aliasmap,!0),b&&f.importProfile(b,!0),Object.keys(this).forEach(function(a){if("function"!=typeof e[a]&&!("$"==a[0]||"@"==a[0]||e.list&&"list"==a)){if(e[a].id&&"IRI"==e[a].id.nodeType())return d.push(g(a,f)+" "+e[a].id.n3());e[a].nodeType||e[a].id||C.call(e[a]),d.push(c+(e.list?"":g(a,f)+" ")+e[a].n3(f,c+"	"))}}),a?this.id.n3(void 0)+d.join(";")+" .":this.list?"( "+d.join(" ")+" )":"["+d+" ]"}),toNT:e(function(a){return this.graphify(a).toArray().join("\n")}),graphify:e(k),using:e(function(){return Object.defineProperty(this,"aliasmap",e(Array.prototype.slice.call(arguments))),this})}),this},t={equals:e(m),ref:e(s)};c.setObjectProperties=function(a){Object.defineProperties(a,t)};var u={tl:e(function(a){return r.createLiteral(this.toString(),null,a)}),l:e(function(a){return r.createLiteral(this.toString(),a,null)}),resolve:e(function(){return this.indexOf(":")<0||this.indexOf("//")>=0?this.toString():r.resolve(this)||this.toString()}),value:f(function(){return this.toString()}),nodeType:e(function(){return"_:"==this.substr(0,2)?"BlankNode":"IRI"}),n3:e(function(){switch(this.nodeType()){case"PlainLiteral":return('"'+i(this)+'"'+(this.language?"@"+this.language:"")).toString();case"IRI":var a=this.resolve();return a==this?"<"+i(a)+">":this.toString();case"BlankNode":return this.toString();case"TypedLiteral":return this.type.resolve()==r.resolve("rdf:PlainLiteral")?'"'+i(this)+'"':'"'+i(this)+'"^^<'+this.datatype+">"}}),toNT:e(function(){switch(this.nodeType()){case"PlainLiteral":return('"'+i(this)+'"'+(this.language?"@"+this.language:"")).toString();case"IRI":return"<"+i(this.resolve())+">";case"BlankNode":return this.toString();case"TypedLiteral":return this.type.resolve()==r.resolve("rdf:PlainLiteral")?'"'+i(this)+'"':'"'+i(this)+'"^^<'+this.datatype+">"}}),toCanonical:e(function(){return this.n3()})};c.setStringProperties=function(a){Object.defineProperties(a,u)};var v={toList:e(function(){return this.list=!0,this}),n3:e(function(a,b){b=b||"\n	";var c=[];return this.forEach(function(d){if("function"!=typeof d){if(d.id&&"IRI"==d.id.nodeType())return c.push(d.id.n3());d.nodeType||s.call(d),c.push(d.n3(a,b+"	"))}}),this.list?"("+b+c.join(b)+" )":c.join(", ")})};c.setArrayProperties=function(a){Object.defineProperties(a,v)};var w={datatype:e(d("boolean")),value:f(function(){return this}),nodeType:e(function(){return"TypedLiteral"}),n3:e(function(){return this.valueOf()}),toNT:e(function(){return'"'+this.valueOf()+'"^^<'+this.datatype+">"}),toCanonical:e(function(){return this.toNT()})};c.setBooleanProperties=function(a){Object.defineProperties(a,w)};var x={datatype:e(d("dateTime")),value:f(function(){return this}),nodeType:e(function(){return"TypedLiteral"}),n3:e(function(){return this.getTime()?'"'+this.getUTCFullYear()+"-"+h(this.getUTCMonth()+1)+"-"+h(this.getUTCDate())+"T"+h(this.getUTCHours())+":"+h(this.getUTCMinutes())+":"+h(this.getUTCSeconds())+'Z"^^<'+this.datatype+">":'"NaN"^^<'+d("double")+">"}),toNT:e(function(){return this.n3()}),toCanonical:e(function(){return this.n3()})};c.setDateProperties=function(a){Object.defineProperties(a,x)};var y=new RegExp("^(-|\\+)?[0-9]+$",""),z=new RegExp("^(-|\\+)?(([0-9]+\\.[0-9]*[eE]{1}(-|\\+)?[0-9]+)|(\\.[0-9]+[eE]{1}(-|\\+)?[0-9]+)|([0-9]+[eE]{1}(-|\\+)?[0-9]+))$",""),A=new RegExp("^(-|\\+)?[0-9]*\\.[0-9]+?$",""),B={datatype:{configurable:!1,enumerable:!1,get:function(){if(this==Number.POSITIVE_INFINITY)return d("double");if(this==Number.NEGATIVE_INFINITY)return d("double");if(isNaN(this))return d("double");var a=this.toString();return y.test(a)?d("integer"):A.test(a)?d("decimal"):z.test(a)?d("double"):void 0}},value:f(function(){return this}),nodeType:e(function(){return"TypedLiteral"}),n3:e(function(){return this==Number.POSITIVE_INFINITY?'"INF"^^<'+d("double")+">":this==Number.NEGATIVE_INFINITY?'"-INF"^^<'+d("double")+">":isNaN(this)?'"NaN"^^<'+"xsd:double".resolve()+">":this.toString()}),toNT:e(function(){return this==Number.POSITIVE_INFINITY?'"INF"^^<'+d("double")+">":this==Number.NEGATIVE_INFINITY?'"-INF"^^<'+d("double")+">":isNaN(this)?'"NaN"^^<'+d("double")+">":'"'+this.toString()+'"^^<'+this.datatype+">"}),toCanonical:e(function(){return this.nt()}),toTL:e(function(){return this.nt()})};c.setNumberProperties=function(a){Object.defineProperties(a,B)},c.toStruct=function(a){var b;return"string"==typeof a||a instanceof String?(b=new String(a),api.setStringProperties(b)):a instanceof Array?(b=new Array(a),api.setArrayProperties(b)):"boolean"==typeof a||a instanceof Boolean?(b=new Boolean(a),api.setBooleanProperties(b)):a instanceof Date?(b=new Date(a),api.setNumberProperties(b)):"number"==typeof a||a instanceof Number?(b=new Number(a),api.setNumberProperties(b)):b=new Object(a),api.setObjectProperties(b),b},c.setBuiltins=function(){c.setObjectProperties(Object.prototype),c.setStringProperties(String.prototype),c.setArrayProperties(Array.prototype),c.setBooleanProperties(Boolean.prototype),c.setDateProperties(Date.prototype),c.setNumberProperties(Number.prototype)}},{"./Default.js":2,"./RDFEnvironment.js":5,"./RDFNode.js":6,util:13}],2:[function(a,b,c){function d(a){return"http://www.w3.org/2001/XMLSchema#".concat(a)}c.loadDefaultTypeConverters=function(a){var b=function(a){return new String(a).valueOf()};a.registerTypeConversion(d("string"),b);var c=function(a){switch(a){case"false":case"0":return!1}return new Boolean(a).valueOf()};a.registerTypeConversion(d("boolean"),c);var e=function(a){return new Number(a).valueOf()},f=function(a,b){switch(a){case"INF":return Number.POSITIVE_INFINITY;case"-INF":return Number.NEGATIVE_INFINITY;default:return e(a,b)}};a.registerTypeConversion(d("float"),f),a.registerTypeConversion(d("integer"),e),a.registerTypeConversion(d("long"),e),a.registerTypeConversion(d("double"),e),a.registerTypeConversion(d("decimal"),e),a.registerTypeConversion(d("nonPositiveInteger"),e),a.registerTypeConversion(d("nonNegativeInteger"),e),a.registerTypeConversion(d("negativeInteger"),e),a.registerTypeConversion(d("int"),e),a.registerTypeConversion(d("unsignedLong"),e),a.registerTypeConversion(d("positiveInteger"),e),a.registerTypeConversion(d("short"),e),a.registerTypeConversion(d("unsignedInt"),e),a.registerTypeConversion(d("byte"),e),a.registerTypeConversion(d("unsignedShort"),e),a.registerTypeConversion(d("unsignedByte"),e);var g=function(a){return new Date(a)};a.registerTypeConversion(d("date"),g),a.registerTypeConversion(d("time"),g),a.registerTypeConversion(d("dateTime"),g)},c.loadRequiredPrefixMap=function(a){a.setPrefix("owl","http://www.w3.org/2002/07/owl#"),a.setPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#"),a.setPrefix("rdfs","http://www.w3.org/2000/01/rdf-schema#"),a.setPrefix("rdfa","http://www.w3.org/ns/rdfa#"),a.setPrefix("xhv","http://www.w3.org/1999/xhtml/vocab#"),a.setPrefix("xml","http://www.w3.org/XML/1998/namespace"),a.setPrefix("xsd","http://www.w3.org/2001/XMLSchema#")},c.loadDefaultPrefixMap=function(a){c.loadRequiredPrefixMap(a),a.setPrefix("grddl","http://www.w3.org/2003/g/data-view#"),a.setPrefix("powder","http://www.w3.org/2007/05/powder#"),a.setPrefix("powders","http://www.w3.org/2007/05/powder-s#"),a.setPrefix("rif","http://www.w3.org/2007/rif#"),a.setPrefix("atom","http://www.w3.org/2005/Atom/"),a.setPrefix("xhtml","http://www.w3.org/1999/xhtml#"),a.setPrefix("formats","http://www.w3.org/ns/formats/"),a.setPrefix("xforms","http://www.w3.org/2002/xforms/"),a.setPrefix("xhtmlvocab","http://www.w3.org/1999/xhtml/vocab/"),a.setPrefix("xpathfn","http://www.w3.org/2005/xpath-functions#"),a.setPrefix("http","http://www.w3.org/2006/http#"),a.setPrefix("link","http://www.w3.org/2006/link#"),a.setPrefix("time","http://www.w3.org/2006/time#"),a.setPrefix("acl","http://www.w3.org/ns/auth/acl#"),a.setPrefix("cert","http://www.w3.org/ns/auth/cert#"),a.setPrefix("rsa","http://www.w3.org/ns/auth/rsa#"),a.setPrefix("crypto","http://www.w3.org/2000/10/swap/crypto#"),a.setPrefix("list","http://www.w3.org/2000/10/swap/list#"),a.setPrefix("log","http://www.w3.org/2000/10/swap/log#"),a.setPrefix("math","http://www.w3.org/2000/10/swap/math#"),a.setPrefix("os","http://www.w3.org/2000/10/swap/os#"),a.setPrefix("string","http://www.w3.org/2000/10/swap/string#"),a.setPrefix("doc","http://www.w3.org/2000/10/swap/pim/doc#"),a.setPrefix("contact","http://www.w3.org/2000/10/swap/pim/contact#"),a.setPrefix("p3p","http://www.w3.org/2002/01/p3prdfv1#"),a.setPrefix("swrl","http://www.w3.org/2003/11/swrl#"),a.setPrefix("swrlb","http://www.w3.org/2003/11/swrlb#"),a.setPrefix("exif","http://www.w3.org/2003/12/exif/ns#"),a.setPrefix("earl","http://www.w3.org/ns/earl#"),a.setPrefix("ma","http://www.w3.org/ns/ma-ont#"),a.setPrefix("sawsdl","http://www.w3.org/ns/sawsdl#"),a.setPrefix("sd","http://www.w3.org/ns/sparql-service-description#"),a.setPrefix("skos","http://www.w3.org/2004/02/skos/core#"),a.setPrefix("fresnel","http://www.w3.org/2004/09/fresnel#"),a.setPrefix("gen","http://www.w3.org/2006/gen/ont#"),a.setPrefix("timezone","http://www.w3.org/2006/timezone#"),a.setPrefix("skosxl","http://www.w3.org/2008/05/skos-xl#"),a.setPrefix("org","http://www.w3.org/ns/org#"),a.setPrefix("ical","http://www.w3.org/2002/12/cal/ical#"),a.setPrefix("wgs84","http://www.w3.org/2003/01/geo/wgs84_pos#"),a.setPrefix("vcard","http://www.w3.org/2006/vcard/ns#"),a.setPrefix("turtle","http://www.w3.org/2008/turtle#"),a.setPrefix("pointers","http://www.w3.org/2009/pointers#"),a.setPrefix("dcat","http://www.w3.org/ns/dcat#"),a.setPrefix("imreg","http://www.w3.org/2004/02/image-regions#"),a.setPrefix("rdfg","http://www.w3.org/2004/03/trix/rdfg-1/"),a.setPrefix("swp","http://www.w3.org/2004/03/trix/swp-2/"),a.setPrefix("rei","http://www.w3.org/2004/06/rei#"),a.setPrefix("wairole","http://www.w3.org/2005/01/wai-rdf/GUIRoleTaxonomy#"),a.setPrefix("states","http://www.w3.org/2005/07/aaa#"),a.setPrefix("wn20schema","http://www.w3.org/2006/03/wn/wn20/schema/"),a.setPrefix("httph","http://www.w3.org/2007/ont/httph#"),a.setPrefix("act","http://www.w3.org/2007/rif-builtin-action#"),a.setPrefix("common","http://www.w3.org/2007/uwa/context/common.owl#"),a.setPrefix("dcn","http://www.w3.org/2007/uwa/context/deliverycontext.owl#"),a.setPrefix("hard","http://www.w3.org/2007/uwa/context/hardware.owl#"),a.setPrefix("java","http://www.w3.org/2007/uwa/context/java.owl#"),a.setPrefix("loc","http://www.w3.org/2007/uwa/context/location.owl#"),a.setPrefix("net","http://www.w3.org/2007/uwa/context/network.owl#"),a.setPrefix("push","http://www.w3.org/2007/uwa/context/push.owl#"),a.setPrefix("soft","http://www.w3.org/2007/uwa/context/software.owl#"),a.setPrefix("web","http://www.w3.org/2007/uwa/context/web.owl#"),a.setPrefix("content","http://www.w3.org/2008/content#"),a.setPrefix("vs","http://www.w3.org/2003/06/sw-vocab-status/ns#"),a.setPrefix("air","http://dig.csail.mit.edu/TAMI/2007/amord/air#"),a.setPrefix("ex","http://example.org/"),a.setPrefix("dc","http://purl.org/dc/terms/"),a.setPrefix("dc11","http://purl.org/dc/elements/1.1/"),a.setPrefix("dctype","http://purl.org/dc/dcmitype/"),a.setPrefix("foaf","http://xmlns.com/foaf/0.1/"),a.setPrefix("cc","http://creativecommons.org/ns#"),a.setPrefix("opensearch","http://a9.com/-/spec/opensearch/1.1/"),a.setPrefix("void","http://rdfs.org/ns/void#"),a.setPrefix("sioc","http://rdfs.org/sioc/ns#"),a.setPrefix("sioca","http://rdfs.org/sioc/actions#"),a.setPrefix("sioct","http://rdfs.org/sioc/types#"),a.setPrefix("lgd","http://linkedgeodata.org/vocabulary#"),a.setPrefix("moat","http://moat-project.org/ns#"),a.setPrefix("days","http://ontologi.es/days#"),a.setPrefix("giving","http://ontologi.es/giving#"),a.setPrefix("lang","http://ontologi.es/lang/core#"),a.setPrefix("like","http://ontologi.es/like#"),a.setPrefix("status","http://ontologi.es/status#"),a.setPrefix("og","http://opengraphprotocol.org/schema/"),a.setPrefix("protege","http://protege.stanford.edu/system#"),a.setPrefix("dady","http://purl.org/NET/dady#"),a.setPrefix("uri","http://purl.org/NET/uri#"),a.setPrefix("audio","http://purl.org/media/audio#"),a.setPrefix("video","http://purl.org/media/video#"),a.setPrefix("gridworks","http://purl.org/net/opmv/types/gridworks#"),a.setPrefix("hcterms","http://purl.org/uF/hCard/terms/"),a.setPrefix("bio","http://purl.org/vocab/bio/0.1/"),a.setPrefix("cs","http://purl.org/vocab/changeset/schema#"),a.setPrefix("geographis","http://telegraphis.net/ontology/geography/geography#"),a.setPrefix("doap","http://usefulinc.com/ns/doap#"),a.setPrefix("daml","http://www.daml.org/2001/03/daml+oil#"),a.setPrefix("geonames","http://www.geonames.org/ontology#"),a.setPrefix("sesame","http://www.openrdf.org/schema/sesame#"),a.setPrefix("cv","http://rdfs.org/resume-rdf/"),a.setPrefix("wot","http://xmlns.com/wot/0.1/"),a.setPrefix("media","http://purl.org/microformat/hmedia/"),a.setPrefix("ctag","http://commontag.org/ns#")}},{}],3:[function(a,b,c){function d(a,b,c,d,e){a[b]||(a[b]={}),a[b][c]||(a[b][c]={}),a[b][c][d]=e}function e(a,b,c,d){a[b]&&a[b][c]&&a[b][c][d]&&(delete a[b][c][d],Object.keys(a[b][c]).length||delete a[b][c],Object.keys(a[b]).length||delete a[b])}var f=c,g="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil",h="http://www.w3.org/1999/02/22-rdf-syntax-ns#first",i="http://www.w3.org/1999/02/22-rdf-syntax-ns#rest";f.Graph=f.TripletGraph=function(a){this.clear(),Object.defineProperty(this,"size",{get:function(){return b.length}});var b=this;a&&a.forEach&&a.forEach(function(a){b.add(a)})},f.TripletGraph.prototype.length=null,f.TripletGraph.prototype.graph=null,f.TripletGraph.prototype.importArray=function(a){for(;a.length>0;)this.add(a.pop())},f.TripletGraph.prototype.insertIndex=d,f.TripletGraph.prototype.deleteIndex=e,f.TripletGraph.prototype.add=function(a){d(this.indexOPS,a.object,a.predicate,a.subject,a),d(this.indexPSO,a.predicate,a.subject,a.object,a),d(this.indexSOP,a.subject,a.object,a.predicate,a),this.length++},f.TripletGraph.prototype.addAll=function(a){var b=this;a.forEach(function(a){b.add(a)})},f.TripletGraph.prototype.merge=function(a){var b=new f.TripletGraph;return b.addAll(this),b.addAll(a),b},f.TripletGraph.prototype.remove=function(a){e(this.indexOPS,a.object,a.predicate,a.subject),e(this.indexPSO,a.predicate,a.subject,a.object),e(this.indexSOP,a.subject,a.object,a.predicate),this.length--},f.TripletGraph.prototype.removeMatches=function(){},f.TripletGraph.prototype.clear=function(){this.indexSOP={},this.indexPSO={},this.indexOPS={},this.length=0},f.TripletGraph.prototype.import=function(a){for(var b=0,c=a.length;c>b;){var d=b++;this.add(a.get(d))}},f.TripletGraph.prototype.every=function(a){return this.toArray().every(a)},f.TripletGraph.prototype.some=function(a){return this.toArray().some(a)},f.TripletGraph.prototype.forEach=function(a){this.toArray().forEach(a)},f.TripletGraph.prototype.apply=function(a){this.graph=this.toArray().filter(a),this.length=this.graph.length},f.TripletGraph.prototype.toArray=function(){return this.match()},f.TripletGraph.prototype.filter=function(a){return this.toArray().filter(a)},f.TripletGraph.prototype.getCollection=function(a){for(var b,c=[],d=[],e=a;e&&e!=g;){if(b=this.match(e,h).map(function(a){return a.object})[0],void 0===b)throw new Error("Collection <"+e+"> is incomplete");if(-1!==d.indexOf(e))throw new Error("Collection <"+e+"> is circular");d.push(e),c.push(b),e=this.match(e,i).map(function(a){return a.object})[0]}return c},f.TripletGraph.prototype.match=function(a,b,c){var d=[],e={s:a,p:b,o:c},f=[{index:this.indexOPS,constants:["o","p","s"],variables:[]},{index:this.indexPSO,constants:["p","s"],variables:["o"]},{index:this.indexSOP,constants:["s","o"],variables:["p"]},{index:this.indexSOP,constants:["s"],variables:["o","p"]},{index:this.indexOPS,constants:["o","p"],variables:["s"]},{index:this.indexPSO,constants:["p"],variables:["s","o"]},{index:this.indexOPS,constants:["o"],variables:["p","s"]},{index:this.indexPSO,constants:[],variables:["p","s","o"]}],g=0;e.s||(g|=4),e.p||(g|=2),e.o||(g|=1);var h=f[g],i=h.index;return h.constants.forEach(function(a){i&&(i=i[e[a]])}),i?(function j(a,b){b?Object.keys(a).forEach(function(c){j(a[c],b-1)}):d.push(a)}(i,h.variables.length),d):[]}},{}],4:[function(a,b,c){{var d=c;a("./RDFNode.js").NamedNode}d.SCHEME_MATCH=new RegExp("^[a-z0-9-.+]+:","i"),d.PrefixMap=function(){},d.PrefixMap.prototype.get=function(a){return":"==a.slice(-1)&&(a=a.slice(0,-1)),Object.hasOwnProperty.call(this,a)?this[a]:void 0},d.PrefixMap.prototype.set=function(a,b){":"==a.slice(-1)&&(a=a.slice(0,-1)),this[a]=b},d.PrefixMap.prototype.remove=function(){Object.hasOwnProperty.call(this,prefix)&&delete this[prefix]},d.PrefixMap.prototype.resolve=function(a){var b=a.indexOf(":");if(0>b)return null;var c=a.slice(0,b),e=this[c];if(!e)return null;var f=e.concat(a.slice(++b));return null==f.match(d.SCHEME_MATCH)&&null!=this.base&&(f=this.base.resolveReference(f)),f.toString()},d.PrefixMap.prototype.shrink=function(a){for(prefix in this)if(Object.hasOwnProperty.call(this,prefix)&&a.substr(0,this[prefix].length)==this[prefix])return prefix+":"+a.slice(this[prefix].length);return a},d.PrefixMap.prototype.setDefault=function(a){this.set("",a)},d.PrefixMap.prototype.addAll=function(a,b){if(b)for(var c in a)this.set(c,a[c]);else for(var c in a)Object.hasOwnProperty.call(this,c)||this.set(c,a[c])},d.TermMap=function(){},d.TermMap.prototype.get=function(a){return Object.hasOwnProperty.call(this,a)?this[a]:void 0},d.TermMap.prototype.set=function(a,b){this[a]=b},d.TermMap.prototype.remove=function(){Object.hasOwnProperty.call(this,prefix)&&delete this[prefix]},d.TermMap.prototype.resolve=function(a){return Object.hasOwnProperty.call(this,a)?this[a]:null},d.TermMap.prototype.shrink=function(a){for(term in this)if(Object.hasOwnProperty.call(this,term)&&a==this[term])return term;return a},d.TermMap.prototype.setDefault=function(a){this.set("",a)},d.TermMap.prototype.addAll=function(a,b){if(b)for(var c in a)this.set(c,a[c]);else for(var c in a)Object.hasOwnProperty.call(this,c)||this.set(c,a[c])},d.Profile=function(){this.prefixes=new d.PrefixMap,this.terms=new d.TermMap},d.Profile.prototype.resolve=function(a){return a.indexOf(":")<0?this.terms.resolve(a):this.prefixes.resolve(a)},d.Profile.prototype.setDefaultVocabulary=function(a){this.terms.setDefault(a)},d.Profile.prototype.setDefaultPrefix=function(a){this.prefixes.setDefault(a)},d.Profile.prototype.setTerm=function(a,b){this.terms.set(a,b)},d.Profile.prototype.setPrefix=function(a,b){this.prefixes.set(a,b)},d.Profile.prototype.shrink=function(a){return this.terms.shrink(this.prefixes.shrink(a))},d.Profile.prototype.importProfile=function(a,b){this.prefixes.addAll(a.prefixes,b),this.terms.addAll(a.terms,b)},d.Profile.prototype._resolveType=function(a){return"^^"==a.slice(0,2)&&(a=a.slice(2)),this.resolve(a)||a}},{"./RDFNode.js":6}],5:[function(a,b,c){var d=a("./RDFNode.js").NamedNode,e=a("./RDFNode.js").BlankNode,f=a("./RDFNode.js").Literal,g=a("./RDFNode.js").Triple,h=a("./Graph.js").Graph,i=a("./Profile.js").Profile,j=a("./Profile.js").PrefixMap,k=a("./Profile.js").TermMap,l=a("./Default.js").loadRequiredPrefixMap;c.RDFEnvironment=function(){i.call(this),l(this)},c.RDFEnvironment.prototype=Object.create(i.prototype,{constructor:{value:c.RDFEnvironment,iterable:!1}}),c.RDFEnvironment.prototype.createBlankNode=function(){return new e},c.RDFEnvironment.prototype.createNamedNode=function(a){return new d(a)},c.RDFEnvironment.prototype.createLiteral=function(a,b,c){var d=new f(a);return d.language=b,d.datatype=c,d},c.RDFEnvironment.prototype.createTriple=function(a,b,c){return new g(a,b,c)},c.RDFEnvironment.prototype.createGraph=function(a){return new h(a)},c.RDFEnvironment.prototype.createProfile=function(){return new i},c.RDFEnvironment.prototype.createTermMap=function(){return new k},c.RDFEnvironment.prototype.createPrefixMap=function(){return new j}},{"./Default.js":2,"./Graph.js":3,"./Profile.js":4,"./RDFNode.js":6}],6:[function(a,b,c){function d(a){return a.nodeType?a.nodeType():"string"==typeof a?"_:"==a.substr(0,2)?"BlankNode":"IRI":"TypedLiteral"}function e(a){if(d(this)!=d(a))return!1;switch(d(this)){case"IRI":case"BlankNode":return this.toString()==a.toString();case"PlainLiteral":return this.language==a.language&&this.nominalValue==a.nominalValue;case"TypedLiteral":return this.type==a.type&&this.nominalValue==a.nominalValue}return this.toNT()==a.toNT()}var f=c;f.nodeType=d,f.RDFNodeEquals=e,f.Triple=function(a,b,c){this.subject=a,this.predicate=b,this.object=c},f.Triple.prototype.size=3,f.Triple.prototype.length=3,f.Triple.prototype.toString=function(){return this.subject.toNT()+" "+this.predicate.toNT()+" "+this.object.toNT()+" ."},f.Triple.prototype.equals=function(a){return e.call(this.subject,a.subject)&&e.call(this.predicate,a.predicate)&&e.call(this.object,a.object)},f.RDFNode=function(){},f.RDFNode.prototype.equals=f.RDFNodeEquals=e,f.RDFNode.prototype.nodeType=function(){return"RDFNode"},f.RDFNode.prototype.toNT=function(){return""},f.RDFNode.prototype.toCanonical=function(){return this.toNT()},f.RDFNode.prototype.toString=function(){return this.nominalValue},f.RDFNode.prototype.valueOf=function(){return this.nominalValue},f.encodeString=function(a){for(var b="",c=!1,d=0,e=a.length;e>d;){var f=d++;if(c)c=!c;else{var g=a.charCodeAt(f);if(g>=55296&&56319>=g){var h=a.charCodeAt(f+1);g=1024*(g-55296)+(h-56320)+65536,c=!0}if(g>1114111)throw new Error("Char out of range");var i="00000000".concat(new Number(g).toString(16).toUpperCase());if(g>=65536)b+="\\U"+i.slice(-8);else if(g>=127||31>=g)switch(g){case 9:b+="\\t";break;case 10:b+="\\n";break;case 13:b+="\\r";break;default:b+="\\u"+i.slice(-4)}else switch(g){case 34:b+='\\"';break;case 92:b+="\\\\";break;default:b+=a.charAt(f)}}}return b},f.BlankNode=function(a){this.nominalValue="string"==typeof a&&"_:"==a.substr(0,2)?a.substr(2):a?a:"b"+(++f.BlankNode.NextId).toString()},f.BlankNode.NextId=0,f.BlankNode.prototype=new f.RDFNode,f.BlankNode.prototype.nodeType=function(){return"BlankNode"},f.BlankNode.prototype.toNT=function(){return"_:"+this.nominalValue},f.BlankNode.prototype.n3=function(){return this.toNT()},f.BlankNode.prototype.toString=function(){return"_:"+this.nominalValue},f.Literal=function(a,b){this.nominalValue=a,"string"==typeof b&&"@"==b[0]?this.language=b.slice(1):"string"==typeof b&&(this.datatype=b)
},f.Literal.prototype=new f.RDFNode,f.Literal.prototype.nodeType=function(){return this.datatype?"TypedLiteral":"PlainLiteral"},f.Literal.prototype.toNT=function(){var a='"'+f.encodeString(this.nominalValue)+'"';return this.datatype?a+"^^<"+this.datatype+">":this.language?a+"@"+this.language:a},f.Literal.prototype.n3=function(){return this.toNT()},f.Literal.prototype.valueOf=function(){return this.datatype&&"function"==typeof f.Literal.typeValueOf[this.datatype]?f.Literal.typeValueOf[this.datatype](this.nominalValue,this.datatype):this.nominalValue},f.Literal.typeValueOf={},f.Literal.registerTypeConversion=function(a,b){f.Literal.typeValueOf[a]=b},a("./Default.js").loadDefaultTypeConverters(f.Literal),f.NamedNode=function(a){this.nominalValue=a},f.NamedNode.SCHEME_MATCH=new RegExp("^[a-z0-9-.+]+:","i"),f.NamedNode.prototype=new f.RDFNode,f.NamedNode.prototype.nodeType=function(){return"IRI"},f.NamedNode.prototype.toNT=function(){return"<"+f.encodeString(this.nominalValue)+">"},f.NamedNode.prototype.n3=function(){return this.toNT()}},{"./Default.js":2}],7:[function(a,b,c){function d(a){return"http://www.w3.org/1999/02/22-rdf-syntax-ns#"+a}function e(a){return"http://www.w3.org/2001/XMLSchema#"+a}function f(a){a||(a=i.createProfile()),this.environment=a,this.base=new h(""),this.bnHash={},this.filter=null,this.processor=null,this.quick=null,this.graph=null,this.blocks=[]}var g=c,h=(a("./RDFNode.js").Triple,a("iri").IRI),i=a("./Builtins.js").environment;g.u8=new RegExp("\\\\U([A-F0-9]{8})","g"),g.u4=new RegExp("\\\\u([A-F0-9]{4})","g"),g.hexToChar=function(a){var b="",c=parseInt(a,16);if(65535>=c)b+=String.fromCharCode(c);else{if(!(1114111>=c))throw new Error("code point isn't known: "+c);c-=65536,b+=String.fromCharCode(55296+(c>>10),56320+(1023&c))}return b},g.decodeString=function(a){return a=a.replace(g.u8,function(a,b){return g.hexToChar(b)}),a=a.replace(g.u4,function(a,b){return g.hexToChar(b)}),a=a.replace(new RegExp("\\\\t","g"),"	"),a=a.replace(new RegExp("\\\\n","g"),"\n"),a=a.replace(new RegExp("\\\\r","g"),"\r"),a=a.replace(new RegExp('\\\\"',"g"),'"'),a=a.replace(new RegExp("\\\\\\\\","g"),"\\")},g.Turtle=f,f.isWhitespace=new RegExp("^[ 	\r\n#]+",""),f.initialWhitespace=new RegExp("^[ 	\r\n]+",""),f.initialComment=new RegExp("^#[^\r\n]*",""),f.simpleToken=new RegExp("^[^ 	\r\n]+",""),f.simpleObjectToken=/^(\\[_\~\.\-\!\$&'()*+,;=\/?#@%]|%[0-9A-Fa-f]{2}|[^ \t\r\n;,])+/,f.tokenInteger=new RegExp("^(-|\\+)?[0-9]+$",""),f.tokenDouble=new RegExp("^(-|\\+)?(([0-9]+\\.[0-9]*[eE]{1}(-|\\+)?[0-9]+)|(\\.[0-9]+[eE]{1}(-|\\+)?[0-9]+)|([0-9]+[eE]{1}(-|\\+)?[0-9]+))$",""),f.tokenDecimal=new RegExp("^(-|\\+)?[0-9]*\\.[0-9]+?$",""),f.prototype.parse=function(a,b,c,d,e){return this.graph=null==e?i.createGraph():e,c&&(this.base=new h(c.toString())),this.filter=d,this.quick=!1,this.parseStatements(new String(a)),"function"==typeof b&&b(this.graph),!0},f.prototype.process=function(a,b,c){return this.processor=b,base&&(this.base=new h(base.toString())),this.filter=c,this.quick=!0,this.parseStatements(new String(a))},f.prototype.t=function(){return{o:null}},f.prototype.parseStatements=function(a){var b=this;b.blocks=[],a=a.toString();for(var c=a.length;a.length>0;){if(a=this.skipWS(a),0==a.length)return!0;var d,e,f=c-a.length;if("@"==a.charAt(0)||"BASE"==a.substring(0,4).toUpperCase()||"PREFIX"==a.substring(0,6).toUpperCase())a=this.consumeDirective(a),d="directive";else{var g=this.t();this.consumeStatementSubject(a,g),a=this.consumeStatement(a),e=g.o.toCanonical(),d="statement"}b.blocks.push({type:d,subject:e,start:f,length:c-a.length-f}),a=this.skipWS(a)}return!0},f.prototype.add=function(a){var b=!0;null!=this.filter&&(b=this.filter(a,null,null)),b&&(this.quick?this.processor(a):this.graph.add(a))},f.prototype.consumeBlankNode=function(a,b){return b.o=i.createBlankNode(),a=this.skipWS(a.slice(1)),"]"==a.charAt(0)?a.slice(1):(a=this.skipWS(this.consumePredicateObjectList(a,b)),this.expect(a,"]"),this.skipWS(a.slice(1)))},f.prototype.consumeCollection=function(a,b){b.o=i.createBlankNode();var c=this.t();c.o=b.o,a=this.skipWS(a.slice(1));var g=")"!=a.charAt(0);for(g||(b.o=d("nil"));g;){var h=this.t();switch(a.charAt(0)){case"[":a=this.consumeBlankNode(a,h);break;case"_":a=this.consumeKnownBlankNode(a,h);break;case"(":a=this.consumeCollection(a,h);break;case"<":a=this.consumeURI(a,h);break;case'"':case"'":a=this.consumeLiteral(a,h);break;default:var j=a.match(f.simpleObjectToken).shift();if(")"==j.charAt(j.length-1)&&(j=j.substring(0,j.length-1)),"false"==j||"true"==j)h.o=i.createLiteral(j,null,e("boolean"));else if(j.indexOf(":")>=0)h.o=i.createNamedNode(this.environment.resolve(j));else if(f.tokenInteger.test(j))h.o=i.createLiteral(j,null,e("integer"));else if(f.tokenDouble.test(j))h.o=i.createLiteral(j,null,e("double"));else{if(!f.tokenDecimal.test(j))throw new Error("Unrecognised token in collection: "+j);h.o=i.createLiteral(j,null,e("decimal"))}a=a.slice(j.length)}this.add(i.createTriple(c.o,i.createNamedNode(d("first")),h.o)),a=this.skipWS(a),g=")"!=a.charAt(0),this.add(g?i.createTriple(c.o,i.createNamedNode(d("rest")),c.o=i.createBlankNode()):i.createTriple(c.o,i.createNamedNode(d("rest")),i.createNamedNode(d("nil"))))}return this.skipWS(a.slice(1))},f.prototype.consumeDirective=function(a){var b=0;if("prefix"==a.substring(1,7)){a=this.skipWS(a.slice(7)),b=a.indexOf(":");var c=a.substring(0,b);a=this.skipWS(a.slice(++b)),this.expect(a,"<"),this.environment.setPrefix(c,this.base.resolveReference(g.decodeString(a.substring(1,b=a.indexOf(">")))).toString()),a=this.skipWS(a.slice(++b)),this.expect(a,"."),a=a.slice(1)}else if("PREFIX"==a.substring(0,6).toUpperCase()){a=this.skipWS(a.slice(7)),b=a.indexOf(":");var c=a.substring(0,b);a=this.skipWS(a.slice(++b)),this.expect(a,"<"),this.environment.setPrefix(c,this.base.resolveReference(g.decodeString(a.substring(1,b=a.indexOf(">")))).toString()),a=this.skipWS(a.slice(++b))}else if("base"==a.substring(1,5))a=this.skipWS(a.slice(5)),this.expect(a,"<"),this.base=this.base.resolveReference(g.decodeString(a.substring(1,b=a.indexOf(">")))),a=this.skipWS(a.slice(++b)),this.expect(a,"."),a=a.slice(1);else{if("BASE"!=a.substring(0,4).toUpperCase())throw new Error("Unknown directive: "+a.substring(0,50));a=this.skipWS(a.slice(5)),this.expect(a,"<"),this.base=this.base.resolveReference(g.decodeString(a.substring(1,b=a.indexOf(">")))),a=this.skipWS(a.slice(++b))}return a},f.prototype.consumeKnownBlankNode=function(a,b){this.expect(a,"_:");var c=a.slice(2).match(f.simpleToken).shift();return b.o=this.getBlankNode(c),a.slice(c.length+2)},f.prototype.consumeLiteral=function(a,b){var c=a[0],d="",e=!0,h=0,j=c+c+c;if(a.substring(0,3)==j){for(h=3;e;)h=a.indexOf(j,h),(e="\\"==a.charAt(h-1))&&h++;d=a.substring(3,h),a=a.slice(d.length+6)}else{for(;e;)h=a.indexOf(c,h+1),e="\\"==a.charAt(h-1);d=a.substring(1,h),a=a.slice(d.length+2)}switch(d=g.decodeString(d),a.charAt(0)){case"@":var k=a.match(f.simpleObjectToken).shift();b.o=i.createLiteral(d,k.slice(1),null),a=a.slice(k.length);break;case"^":var k=a.match(f.simpleObjectToken).shift().slice(2);b.o="<"==k.charAt(0)?i.createLiteral(d,null,k.substring(1,k.length-1)):i.createLiteral(d,null,k),a=a.slice(k.length+2);break;default:b.o=i.createLiteral(d,null,null)}return a},f.prototype.consumeObjectList=function(a,b,c){for(var d=!0;d;){var g=this.t();switch(a.charAt(0)){case"[":a=this.consumeBlankNode(a,g);break;case"_":a=this.consumeKnownBlankNode(a,g);break;case"(":a=this.consumeCollection(a,g);break;case"<":a=this.consumeURI(a,g);break;case'"':case"'":a=this.consumeLiteral(a,g);break;default:var h=a.match(f.simpleObjectToken);if(h=h&&h[0]||"","."==h.charAt(h.length-1)&&(h=h.substring(0,h.length-1)),"false"==h||"true"==h)g.o=i.createLiteral(h,null,e("boolean"));else if(h.indexOf(":")>=0){if(g.o=i.createNamedNode(this.environment.resolve(h)),!g.o)throw new Error("Prefix not defined for "+h)}else if(f.tokenInteger.test(h))g.o=i.createLiteral(h,null,e("integer"));else if(f.tokenDouble.test(h))g.o=i.createLiteral(h,null,e("double"));else{if(!f.tokenDecimal.test(h))throw new Error("Unrecognised token in ObjectList: "+h);g.o=i.createLiteral(h,null,e("decimal"))}a=a.slice(h.length)}this.add(i.createTriple(b.o,c,g.o)),a=this.skipWS(a),d=","==a.charAt(0),d&&(a=this.skipWS(a.slice(1)))}return a},f.prototype.consumePredicateObjectList=function(a,b){for(var c=!0;c;){var e=a.match(f.simpleToken).shift(),h=null;if("a"==e)h=i.createNamedNode(d("type"));else switch(e.charAt(0)){case"<":h=i.createNamedNode(this.base.resolveReference(g.decodeString(e.substring(1,e.indexOf(">")))).toString());break;case"]":return a;case".":return a;default:h=i.createNamedNode(this.environment.resolve(e))}a=this.skipWS(a.slice(e.length)),a=this.consumeObjectList(a,b,h),c=";"==a.charAt(0),c&&(a=this.skipWS(a.slice(1)))}return a},f.prototype.consumeQName=function(a,b){var c=a.match(f.simpleToken).shift();return b.o=i.createNamedNode(this.environment.resolve(c)),a.slice(c.length)},f.prototype.consumeStatementSubject=function(a,b){switch(a.charAt(0)){case"[":if(a=this.consumeBlankNode(a,b),"."==a.charAt(0))return a;break;case"_":a=this.consumeKnownBlankNode(a,b);break;case"(":a=this.consumeCollection(a,b);break;case"<":a=this.consumeURI(a,b);break;default:a=this.consumeQName(a,b)}return a},f.prototype.consumeStatement=function(a){var b=this.t();return a=this.consumeStatementSubject(a,b),a=this.consumePredicateObjectList(this.skipWS(a),b),this.expect(a,"."),a.slice(1)},f.prototype.consumeURI=function(a,b){this.expect(a,"<");var c=0;return b.o=i.createNamedNode(this.base.resolveReference(g.decodeString(a.substring(1,c=a.indexOf(">")))).toString()),a.slice(++c)},f.prototype.expect=function(a,b){if(a.substring(0,b.length)!=b)throw new Error("Expected token: "+b+" at "+JSON.stringify(a.substring(0,50)))},f.prototype.getBlankNode=function(a){return this.bnHash[a]?this.bnHash[a]:this.bnHash[a]=i.createBlankNode()},f.prototype.skipWS=function(a){for(;f.isWhitespace.test(a.charAt(0));)a=a.replace(f.initialWhitespace,""),"#"==a.charAt(0)&&(a=a.replace(f.initialComment,""));return a}},{"./Builtins.js":1,"./RDFNode.js":6,iri:14}],8:[function(a,b,c){var d=c;d.Triple=a("./RDFNode.js").Triple,d.RDFNode=a("./RDFNode.js").RDFNode,d.NamedNode=a("./RDFNode.js").NamedNode,d.BlankNode=a("./RDFNode.js").BlankNode,d.Literal=a("./RDFNode.js").Literal,d.Profile=a("./Profile.js").Profile,d.RDFEnvironment=a("./RDFEnvironment.js").RDFEnvironment,d.TurtleParser=a("./TurtleParser.js").Turtle,d.DataSerializer=function(){},d.Graph=a("./Graph.js").Graph,d.setObjectProperties=a("./Builtins").setObjectProperties,d.setStringProperties=a("./Builtins").setStringProperties,d.setArrayProperties=a("./Builtins").setArrayProperties,d.setBooleanProperties=a("./Builtins").setBooleanProperties,d.setDateProperties=a("./Builtins").setDateProperties,d.setNumberProperties=a("./Builtins").setNumberProperties,d.environment=a("./Builtins").environment,d.setBuiltins=a("./Builtins").setBuiltins,d.ref=a("./Builtins").ref,d.parse=function(a,b){return d.ref.call(a,b)},d.ns=function(a){return function(b){return a+b}},d.rdfns=d.ns("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),d.rdfsns=d.ns("http://www.w3.org/2000/01/rdf-schema#"),d.xsdns=d.ns("http://www.w3.org/2001/XMLSchema#")},{"./Builtins":1,"./Graph.js":3,"./Profile.js":4,"./RDFEnvironment.js":5,"./RDFNode.js":6,"./TurtleParser.js":7}],9:[function(a){!function(){var b=a("./rdf");"function"==typeof define?define("rdf",[],function(){return b}):(window.rdf=b,"function"==typeof Event&&window.dispatchEvent(new Event("rdfready")))}()},{"./rdf":8}],10:[function(a,b){b.exports="function"==typeof Object.create?function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],11:[function(a,b){function c(){}var d=b.exports={};d.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){var d=c.shift();d()}},!0),function(a){c.push(a),window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}(),d.title="browser",d.browser=!0,d.env={},d.argv=[],d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.binding=function(){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(){throw new Error("process.chdir is not supported")}},{}],12:[function(a,b){b.exports=function(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.readUInt8}},{}],13:[function(a,b,c){(function(b,d){function e(a,b){var d={seen:[],stylize:g};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),p(b)?d.showHidden=b:b&&c._extend(d,b),v(d.showHidden)&&(d.showHidden=!1),v(d.depth)&&(d.depth=2),v(d.colors)&&(d.colors=!1),v(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=f),i(d,a,d.depth)}function f(a,b){var c=e.styles[b];return c?"["+e.colors[c][0]+"m"+a+"["+e.colors[c][1]+"m":a}function g(a){return a}function h(a){var b={};return a.forEach(function(a){b[a]=!0}),b}function i(a,b,d){if(a.customInspect&&b&&A(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d,a);return t(e)||(e=i(a,e,d)),e}var f=j(a,b);if(f)return f;var g=Object.keys(b),p=h(g);if(a.showHidden&&(g=Object.getOwnPropertyNames(b)),z(b)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return k(b);if(0===g.length){if(A(b)){var q=b.name?": "+b.name:"";return a.stylize("[Function"+q+"]","special")}if(w(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(y(b))return a.stylize(Date.prototype.toString.call(b),"date");if(z(b))return k(b)}var r="",s=!1,u=["{","}"];if(o(b)&&(s=!0,u=["[","]"]),A(b)){var v=b.name?": "+b.name:"";r=" [Function"+v+"]"}if(w(b)&&(r=" "+RegExp.prototype.toString.call(b)),y(b)&&(r=" "+Date.prototype.toUTCString.call(b)),z(b)&&(r=" "+k(b)),0===g.length&&(!s||0==b.length))return u[0]+r+u[1];if(0>d)return w(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var x;return x=s?l(a,b,d,p,g):g.map(function(c){return m(a,b,d,p,c,s)}),a.seen.pop(),n(x,r,u)}function j(a,b){if(v(b))return a.stylize("undefined","undefined");if(t(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return s(b)?a.stylize(""+b,"number"):p(b)?a.stylize(""+b,"boolean"):q(b)?a.stylize("null","null"):void 0}function k(a){return"["+Error.prototype.toString.call(a)+"]"}function l(a,b,c,d,e){for(var f=[],g=0,h=b.length;h>g;++g)f.push(F(b,String(g))?m(a,b,c,d,String(g),!0):"");return e.forEach(function(e){e.match(/^\d+$/)||f.push(m(a,b,c,d,e,!0))}),f}function m(a,b,c,d,e,f){var g,h,j;if(j=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]},j.get?h=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(h=a.stylize("[Setter]","special")),F(d,e)||(g="["+e+"]"),h||(a.seen.indexOf(j.value)<0?(h=q(c)?i(a,j.value,null):i(a,j.value,c-1),h.indexOf("\n")>-1&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special")),v(g)){if(f&&e.match(/^\d+$/))return h;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function n(a,b,c){var d=0,e=a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function o(a){return Array.isArray(a)}function p(a){return"boolean"==typeof a}function q(a){return null===a}function r(a){return null==a}function s(a){return"number"==typeof a}function t(a){return"string"==typeof a}function u(a){return"symbol"==typeof a}function v(a){return void 0===a}function w(a){return x(a)&&"[object RegExp]"===C(a)}function x(a){return"object"==typeof a&&null!==a}function y(a){return x(a)&&"[object Date]"===C(a)}function z(a){return x(a)&&("[object Error]"===C(a)||a instanceof Error)}function A(a){return"function"==typeof a}function B(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function C(a){return Object.prototype.toString.call(a)}function D(a){return 10>a?"0"+a.toString(10):a.toString(10)}function E(){var a=new Date,b=[D(a.getHours()),D(a.getMinutes()),D(a.getSeconds())].join(":");return[a.getDate(),J[a.getMonth()],b].join(" ")}function F(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var G=/%[sdj%]/g;c.format=function(a){if(!t(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(e(arguments[c]));return b.join(" ")}for(var c=1,d=arguments,f=d.length,g=String(a).replace(G,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(d[c++]);case"%d":return Number(d[c++]);case"%j":try{return JSON.stringify(d[c++])}catch(b){return"[Circular]"}default:return a}}),h=d[c];f>c;h=d[++c])g+=q(h)||!x(h)?" "+h:" "+e(h);return g},c.deprecate=function(a,e){function f(){if(!g){if(b.throwDeprecation)throw new Error(e);b.traceDeprecation?console.trace(e):console.error(e),g=!0}return a.apply(this,arguments)}if(v(d.process))return function(){return c.deprecate(a,e).apply(this,arguments)};if(b.noDeprecation===!0)return a;var g=!1;return f};var H,I={};c.debuglog=function(a){if(v(H)&&(H=b.env.NODE_DEBUG||""),a=a.toUpperCase(),!I[a])if(new RegExp("\\b"+a+"\\b","i").test(H)){var d=b.pid;I[a]=function(){var b=c.format.apply(c,arguments);console.error("%s %d: %s",a,d,b)}}else I[a]=function(){};return I[a]},c.inspect=e,e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=o,c.isBoolean=p,c.isNull=q,c.isNullOrUndefined=r,c.isNumber=s,c.isString=t,c.isSymbol=u,c.isUndefined=v,c.isRegExp=w,c.isObject=x,c.isDate=y,c.isError=z,c.isFunction=A,c.isPrimitive=B,c.isBuffer=a("./support/isBuffer");var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.log=function(){console.log("%s - %s",E(),c.format.apply(c,arguments))},c.inherits=a("inherits"),c._extend=function(a,b){if(!b||!x(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}}).call(this,a("JkpR2F"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":12,JkpR2F:11,inherits:10}],14:[function(a,b,c){function d(a){this.value=a}var e=c;e.encodeString=function(a){for(var b="",c=!1,d=0,e=a.length;e>d;){var f=d++;if(c)c=!c;else{var g=a.charCodeAt(f);if(g>=55296&&56319>=g){var h=a.charCodeAt(f+1);g=1024*(g-55296)+(h-56320)+65536,c=!0}if(g>1114111)throw new Error("Char out of range");var i="00000000".concat(new Number(g).toString(16).toUpperCase());if(g>=65536)b+="\\U"+i.slice(-8);else if(g>=127||31>=g)switch(g){case 9:b+="\\t";break;case 10:b+="\\n";break;case 13:b+="\\r";break;default:b+="\\u"+i.slice(-4)}else switch(g){case 34:b+='\\"';break;case 92:b+="\\\\";break;default:b+=a.charAt(f)}}}return b},e.IRI=d,d.SCHEME_MATCH=new RegExp("^[a-z0-9-.+]+:","i"),d.prototype.toString=function(){return this.value},d.prototype.nodeType=function(){return"IRI"},d.prototype.toNT=function(){return"<"+e.encodeString(this.value)+">"},d.prototype.n3=function(){return this.toNT()},d.prototype.defrag=function(){var a=this.value.indexOf("#");return 0>a?this:new d(this.value.slice(0,a))},d.prototype.isAbsolute=function(){return null!=this.scheme()&&null!=this.heirpart()&&null==this.fragment()},d.prototype.toAbsolute=function(){if(null==this.scheme()&&null==this.heirpart())throw new Error("IRI must have a scheme and a heirpart!");return this.resolveReference(this.value).defrag()},d.prototype.authority=function f(){var a=this.heirpart();if("//"!=a.substring(0,2))return null;var f=a.slice(2),b=f.indexOf("/");return b>=0?f.substring(0,b):f},d.prototype.fragment=function(){var a=this.value.indexOf("#");return 0>a?null:this.value.slice(a)},d.prototype.heirpart=function g(){var g=this.value,a=g.indexOf("?");a>=0?g=g.substring(0,a):(a=g.indexOf("#"),a>=0&&(g=g.substring(0,a)));var b=this.scheme();return null!=b&&(g=g.slice(1+b.length)),g},d.prototype.host=function h(){var h=this.authority(),a=h.indexOf("@");return a>=0&&(h=h.slice(++a)),0==h.indexOf("[")&&(a=h.indexOf("]"),a>0)?h.substring(0,a):(a=h.lastIndexOf(":"),a>=0?h.substring(0,a):h)},d.prototype.path=function(){var a=this.authority();return null==a?this.heirpart():this.heirpart().slice(a.length+2)},d.prototype.port=function(){var a=this.authority(),b=a.indexOf("@");return b>=0&&(a=a.slice(++b)),0==a.indexOf("[")&&(b=a.indexOf("]"),b>0)?a.substring(0,b):(b=a.lastIndexOf(":"),0>b?null:(a=a.slice(++b),0==a.length?null:a))},d.prototype.query=function(){var a=this.value.indexOf("?");if(0>a)return null;var b=this.value.indexOf("#");return 0>b?this.value.slice(a):this.value.substring(a,b)},e.removeDotSegments=function(a){for(var b="",c=0;a.length>0;)"../"==a.substr(0,3)||"./"==a.substr(0,2)?a=a.slice(a.indexOf("/")):"/."==a?a="/":"/./"==a.substr(0,3)?a=a.slice(2):"/../"==a.substr(0,4)||"/.."==a?(a="/.."==a?"/":a.slice(3),c=b.lastIndexOf("/"),b=c>=0?b.substring(0,c):""):".."==a.substr(0,2)||"."==a.substr(0,1)?(a=a.slice(a.indexOf(".")),c=a.indexOf("."),c>=0&&(a=a.slice(c))):("/"==a.substr(0,1)&&(b+="/",a=a.slice(1)),c=a.indexOf("/"),0>c?(b+=a,a=""):(b+=a.substring(0,c),a=a.slice(c)));return b},d.prototype.resolveReference=function(a){var b;if("string"==typeof a)b=new d(a);else{if(!a.nodeType||"IRI"!=a.nodeType())throw new Error("Expected IRI or String");b=a}var c={scheme:"",authority:"",path:"",query:"",fragment:""},f="";if(null!=b.scheme())c.scheme=b.scheme(),f=b.authority(),c.authority+=null!=f?"//"+f:"",c.path=e.removeDotSegments(b.path()),c.query+=b.query()||"";else{if(f=b.authority(),null!=f)c.authority=null!=f?"//"+f:"",c.path=e.removeDotSegments(b.path()),c.query+=b.query()||"";else{if(f=b.path(),""==f||null==f)c.path=this.path(),f=b.query(),null!=f?c.query+=f:(f=this.query(),c.query+=null!=f?f:"");else{if("/"==f.substring(0,1))c.path=e.removeDotSegments(f);else{if(null!=this.path()){var g=this.path().lastIndexOf("/");g>=0&&(c.path=this.path().substring(0,++g)),c.path+=b.path()}else c.path="/"+f;c.path=e.removeDotSegments(c.path)}c.query+=b.query()||""}f=this.authority(),c.authority=null!=f?"//"+f:""}c.scheme=this.scheme()}return c.fragment=b.fragment()||"",new d(c.scheme+":"+c.authority+c.path+c.query+c.fragment)},d.prototype.scheme=function i(){var i=this.value.match(d.SCHEME_MATCH);return null==i?null:i.shift().slice(0,-1)},d.prototype.userinfo=function(){var a=this.authority(),b=a.indexOf("@");return 0>b?null:a.substring(0,b)},d.prototype.toURIString=function(){return this.value.replace(/([\uA0-\uD7FF\uE000-\uFDCF\uFDF0-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,function(a){return encodeURI(a)})},d.prototype.toIRIString=function(){var a=/%([2-7][0-9A-F])|%[CD][0-9A-F](%[89AB][0-9A-F])|%[E][0-9A-F](%[89AB][0-9A-F]){2}|%[F][0-7](%[89AB][0-9A-F]){3}|%[F][89AB](%[89AB][0-9A-F]){4}|%[F][CD](%[89AB][0-9A-F]){5}/g,b=["3A","2F","3F","23","5B","5D","40","20","21","24","26","27","28","29","2A","2B","2C","3B","3D"],c=this.toString().replace(a,function(a,c){return b.indexOf(c)>=0?a:decodeURIComponent(a)});return c},d.prototype.toIRI=function(){return new d(this.toIRIString())},e.fromURI=function(a){return new d(a).toIRI()},e.toIRIString=function(a){return new d(a).toIRIString()}},{}]},{},[9]);var MD5,RdfJsonDoc,RdfJsonOperation,cloneInternalTriples,exportTriples,hashTripleObject,md5,rdfJson,sharejs,util;MD5=null,util=null,md5=function(a){return MD5.hash(a)},hashTripleObject=function(a){var b;return(b=function(a,b){var c,d,e,f;for(d="",e=0,f=b.length;f>e;e++)c=b[e],"undefined"!=typeof a[c]&&(d+=""+c+":'"+a[c]+"';");return md5(d)})(a,["type","value","lang","datatype"])},cloneInternalTriples=function(a){var b,c,d,e,f,g,h,i,j,k;k={};for(j in a){i=a[j],k[j]={};for(h in i){g=i[h],k[j][h]={};for(f in g){d=g[f],e={};for(b in d)c=d[b],e[b]=c;k[j][h][f]=e}}}return k},exportTriples=function(a){var b,c,d,e,f,g,h,i,j,k;i={};for(h in a){g=a[h],i[h]={};for(f in g){e=g[f],i[h][f]=[],d=[];for(c in e)b=e[c],d.push(c);for(d.sort(),j=0,k=d.length;k>j;j++)c=d[j],b=e[c],i[h][f].push(b)}}return i},RdfJsonDoc=function(){function a(a){null==a&&(a={}),this.triples={},this.insert(a)}return a.fromData=function(b){return a.byInternalTripleSet(b.triples)},a.byInternalTripleSet=function(b){var c;return c=new a,c.triples=b,c},a.prototype.exportTriples=function(){return exportTriples(this.triples)},a.prototype.clone=function(){var b;return b=new a,b.triples=cloneInternalTriples(this.triples),b},a.prototype.insert=function(a){var b,c,d,e,f,g,h;h=[];for(g in a)f=a[g],this.assertSubjectIsUri(g),this.triples[g]||(this.triples[g]={}),h.push(function(){var a;a=[];for(e in f)d=f[e],this.assertPredicateIsUri(e,g),this.assertObjectsArray(d,g,e),this.triples[g][e]||(this.triples[g][e]={}),a.push(function(){var a,f,h;for(h=[],a=0,f=d.length;f>a;a++)b=d[a],c=hashTripleObject(b),h.push(this.triples[g][e][c]=b);return h}.call(this));return a}.call(this));return h},a.prototype["delete"]=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o;o=[];for(l in a)if(h=a[l],this.assertSubjectIsUri(l),this.triples[l]){f=0;for(g in h)if(e=h[g],this.assertPredicateIsUri(g,l),this.assertObjectsArray(e,l,g),f++,this.triples[l][g]){for(k=this.triples[l][g],m=0,n=e.length;n>m;m++)c=e[m],d=hashTripleObject(c),k[d]&&delete this.triples[l][g][d];b=0;for(j in k)i=k[j],b++;0===b&&(f--,delete this.triples[l][g])}o.push(0===f?delete this.triples[l]:void 0)}return o},a.prototype.assertSubjectIsUri=function(a){if("string"!=typeof a||!this.isUri(a))throw new Error("Subject must be an URI: "+a)},a.prototype.assertPredicateIsUri=function(a,b){if("string"!=typeof a||!this.isUri(a))throw new Error("Predicate must be an URI: "+a+" (of subject "+b+")")},a.prototype.assertObjectsArray=function(a,b,c){if("object"!=typeof a||!(a instanceof Array))throw new Error("Objects must be an array of objects: "+a+" (of subject "+b+", predicate "+c+")")},a.prototype.isUri=function(a){return a.match(/^\w+:\/\/\w+(\.\w+)+\//)},a}(),RdfJsonOperation=function(){function a(a,b){this.triplesAdd=a,this.triplesDel=b}return a.insert=function(b){return new a(b,{})},a["delete"]=function(b){return new a({},b)},a.fromData=function(b){return new a(b.triplesAdd,b.triplesDel)},a.prototype.clone=function(){return new a(util.cloneTriples(this.getInsertions()),util.cloneTriples(this.getDeletions()))},a.prototype.getInsertions=function(){return this.triplesAdd},a.prototype.setInsertions=function(a){return this.triplesAdd=a},a.prototype.hasInsertions=function(){return!this._triplesEmpty(this.triplesAdd)},a.prototype.getDeletions=function(){return this.triplesDel},a.prototype.setDeletions=function(a){return this.triplesDel=a},a.prototype.hasDeletions=function(){return!this._triplesEmpty(this.triplesDel)},a.prototype._triplesEmpty=function(a){var b,c;for(b in a)return c=a[b],!1;return!0},a}(),rdfJson={name:"rdf-json",doc:RdfJsonDoc,op:RdfJsonOperation,exportTriples:exportTriples,create:function(){return new RdfJsonDoc},apply:function(a,b){var c;return a=this._ensureDoc(a),b=this._ensureOp(b),c=a.clone(),b.hasInsertions()&&c.insert(b.getInsertions()),b.hasDeletions()&&c["delete"](b.getDeletions()),c},transform:function(a,b,c){var d,e,f;if(f=function(a,b){var c;return c=util.triplesIntersect(a,b),util.triplesDifference(a,c)},e=a.clone(),d="right"===c,"left"!==c&&"right"!==c)throw new Error("Bad parameter 'side' given: "+c);return d?e:util.isTriplesEmpty(a.getInsertions())&&util.isTriplesEmpty(b.getInsertions())?e:util.isTriplesEmpty(a.getDeletions())&&util.isTriplesEmpty(b.getDeletions())?e:(e.setInsertions(util.triplesDifference(a.getInsertions(),b.getDeletions())),e.setDeletions(util.triplesDifference(a.getDeletions(),b.getInsertions())),e)},compose:function(a,b){var c,d,e,f;return d=util.triplesUnion(a.getInsertions(),b.getInsertions()),f=util.triplesUnion(a.getDeletions(),b.getDeletions()),c=util.triplesDifference(d,f),e=util.triplesDifference(f,d),new RdfJsonOperation(c,e)},_ensureDoc:function(a){if(a instanceof RdfJsonDoc)return a;if("object"==typeof a&&a.triples)return RdfJsonDoc.fromData(a);throw new Error("Snapshot must be a rdf-json document. Given: "+JSON.stringify(a))},_ensureOp:function(a){if(a instanceof RdfJsonOperation)return a;if("object"==typeof a&&a.triplesAdd&&a.triplesDel)return RdfJsonOperation.fromData(a);throw new Error("Operation must be a rdf-json operation. Given: "+JSON.stringify(a))}},"undefined"!=typeof WEB&&null!==WEB?(sharejs=window.sharejs,util=sharejs.rdfUtil,MD5=window.SparkMD5,sharejs.types||(sharejs.types={}),sharejs.types["rdf-json"]=rdfJson):(MD5=require("spark-md5"),util=require("../util"),module.exports=rdfJson);var rdfJson;"undefined"==typeof WEB&&(rdfJson=require("./rdf-json")),rdfJson.api={provides:{rdfJson:!0},getRdfJsonData:function(){return rdfJson.exportTriples(this.snapshot.triples)},insertRdfJson:function(a,b){var c;return c=rdfJson.op.insert(a),this.submitOp(c,b),c},deleteRdfJson:function(a,b){var c;return c=rdfJson.op["delete"](a),this.submitOp(c,b),c},updateRdfJson:function(a,b,c){var d;return d=new rdfJson.op(a,b),this.submitOp(d,c),d},_register:function(){return this.on("remoteop",function(a){return this.emit("rdf-update",a.triplesAdd,a.triplesDel)})}};var HybridDoc,HybridOp,arrayFilter,hybridOT,hybridOpToRdfJsonOp,mapTurtleToBlocks,parserTriplesArrayToRdfJson,rdf,rdfJsonOT,removeTripleFromTurtle,removeTripleFromTurtleBlock,sharejs,textOT,util;rdf=null,util=null,rdfJsonOT=null,textOT=null,parserTriplesArrayToRdfJson=function(a){var b,c,d,e,f;for(b=function(a){var b,c;return b="literal",a instanceof rdf.NamedNode&&(b="uri"),a instanceof rdf.BlankNode&&(b="bnode"),c={type:b,value:a.nominalValue},a.language&&(c.lang=a.language),a.datatype&&(c.datatype=a.datatype),c},c={},e=0,f=a.length;f>e;e++)d=a[e],c[d.subject]||(c[d.subject]={}),c[d.subject][d.predicate]||(c[d.subject][d.predicate]=[]),c[d.subject][d.predicate].push(b(d.object));return c},mapTurtleToBlocks=function(a){var b,c;b=[],c=new rdf.TurtleParser;try{c.parse(a)&&(b=c.blocks)}catch(d){}return b},arrayFilter=function(a,b){var c,d,e,f;for(d=[],e=0,f=a.length;f>e;e++)c=a[e],b(c)&&d.push(c);return d},removeTripleFromTurtleBlock=function(a,b,c,d,e,f){var g,h,i,j;return j={},j[d]={},j[d][e]=[f],c=util.triplesDifference(c,j),g=util.rdfJsonToTurtle(c),i=b.start,h=b.start+b.length-1,"\r\n"===a.substr(h+1,2)?h+=2:"\n"===a.charAt(h+1)&&h++,a=a.substr(0,i)+g+a.substr(h+1)},removeTripleFromTurtle=function(a,b,c,d){var e,f,g,h,i,j,k,l,m;for(m="_:"!==b.substr(0,2)?"<"+b+">":b,h=mapTurtleToBlocks(a),i=arrayFilter(h,function(a){return a.subject===m}),j=!1,k=0,l=i.length;l>k;k++)if(e=i[k],f=a.substr(e.start,e.length),g=hybridOT._parseTurtle(f),util.triplesContain(g,b,c,d)){a=removeTripleFromTurtleBlock(a,e,g,b,c,d),j=!0;break}return j||console.warn("Unable to find the triple (s: <"+b+">, p: <"+c+">, o: "+JSON.stringify(d)+") for deletion in: "+a),a},hybridOpToRdfJsonOp=function(a){return new rdfJsonOT.op(a.getRdfInsertions(),a.getRdfDeletions())},HybridDoc=function(){function a(a,b){this.setTurtleContent(a),b instanceof rdfJsonOT.doc?this.rdfJsonDoc=b:this.setRdfJsonContent(b)}return a.fromData=function(b){return new a(b.turtleContent,rdfJsonOT.doc.fromData(b.rdfJsonDoc))
},a.prototype.clone=function(){return new a(this.getTurtleContent(),this.getRdfJsonContent())},a.prototype.getTurtleContent=function(){return this.turtleContent},a.prototype.setTurtleContent=function(a){return this.turtleContent=a},a.prototype.getRdfJsonDoc=function(){return this.rdfJsonDoc},a.prototype.getRdfJsonContent=function(){return this.rdfJsonDoc.exportTriples()},a.prototype.setRdfJsonContent=function(a){return this.rdfJsonDoc=new rdfJsonOT.doc,this.rdfJsonDoc.insert(a),this.rdfJsonDoc},a}(),HybridOp=function(){function a(a,b,c){this.textOps=a,this.rdfInsertions=b,this.rdfDeletions=c}return a.fromData=function(b){return new a(b.textOps,b.rdfInsertions,b.rdfDeletions)},a.prototype.clone=function(){return new a(this.textOps.slice(),this.rdfInsertions.slice(),this.rdfDeletions.slice())},a.prototype.getTextOps=function(){return this.textOps},a.prototype.setTextOps=function(a){return this.textOps=a},a.prototype.getRdfInsertions=function(){return this.rdfInsertions},a.prototype.setRdfInsertions=function(a){return this.rdfInsertions=a},a.prototype.getRdfDeletions=function(){return this.rdfDeletions},a.prototype.setRdfDeletions=function(a){return this.rdfDeletions=a},a}(),hybridOT={name:"turtle-rdf-json",doc:HybridDoc,op:HybridOp,exportTriples:null,create:function(){return new HybridDoc("",{})},apply:function(a,b){var c,d,e;return a=this._ensureDoc(a),b=this._ensureOp(b),e=this.syncDocuments(a,b),d=e[0],c=e[1],new HybridDoc(d,c)},transform:function(a,b,c){var d,e,f;if(a=this._ensureOp(a),b=this._ensureOp(b),d="right"===c,"left"!==c&&"right"!==c)throw new Error("Bad parameter 'side' given: "+c);return f=textOT.transform(a.getTextOps(),b.getTextOps(),c),e=rdfJsonOT.transform(hybridOpToRdfJsonOp(a),hybridOpToRdfJsonOp(b),c),new HybridOp(f,e.getInsertions(),e.getDeletions())},compose:function(a,b){var c,d,e,f;return a=this._ensureOp(a),b=this._ensureOp(b),d=hybridOpToRdfJsonOp(a),e=hybridOpToRdfJsonOp(b),f=textOT.compose(a.getTextOps(),b.getTextOps()),c=rdfJsonOT.compose(d,e),new HybridOp(f,c.getInsertions(),c.getDeletions())},syncDocuments:function(a,b){var c,d,e,f,g,h,i;return a=this._ensureDoc(a),b=this._ensureOp(b),d=a.getRdfJsonDoc(),f=textOT.apply(a.getTurtleContent(),b.getTextOps()),e=new rdfJsonOT.op(b.getRdfInsertions(),b.getRdfDeletions()),c=rdfJsonOT.apply(a.getRdfJsonDoc(),e),h=this._parseTurtleAndCommentedTripleOps(f),f=h[0],g=h[1],g?(i=this._applyTurtleChanges(b,d,c,f,g),f=i[0],c=i[1]):f=this._applyChangesToTurtle(f,null,b.getRdfInsertions(),b.getRdfDeletions()),[f,c]},_applyTurtleChanges:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p;return h=util.triplesDifference(e,b.exportTriples()),i=util.triplesDifference(e,c.exportTriples()),m=util.triplesIntersect(h,i),f=util.triplesDifference(b.exportTriples(),e),g=util.triplesDifference(c.exportTriples(),e),l=util.triplesIntersect(f,g),p=this._eliminateOppositions(a,m,l),a=p[0],m=p[1],l=p[2],k=p[3],j=p[4],o=util.triplesDifference(a.getRdfInsertions(),m),o=util.triplesUnion(o,j),n=util.triplesDifference(a.getRdfDeletions(),l),n=util.triplesUnion(n,k),d=this._applyChangesToTurtle(d,e,o,n),c=this._applyChangesToRdf(c,m,l),[d,c]},_applyChangesToRdf:function(a,b,c){var d;return d=new rdfJsonOT.op(b,c),a=rdfJsonOT.apply(a,d)},_applyChangesToTurtle:function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q;if(b){for(n=util.rdfJsonToArray(c),f=0,j=n.length;j>f;f++)e=n[f],a+="\n"+util.tripleToTurtle(e.s,e.p,e.o);for(o=util.rdfJsonToArray(d),g=0,k=o.length;k>g;g++)e=o[g],a=removeTripleFromTurtle(a,e.s,e.p,e.o)}else{for(p=util.rdfJsonToArray(c),h=0,l=p.length;l>h;h++)e=p[h],a+="\n### insert triple ### "+util.tripleToTurtle(e.s,e.p,e.o);for(q=util.rdfJsonToArray(d),i=0,m=q.length;m>i;i++)e=q[i],a+="\n### delete triple ### "+util.tripleToTurtle(e.s,e.p,e.o)}return a},_eliminateOppositions:function(a,b,c){var d,e,f;return f={},e={},d=util.triplesIntersect(a.getRdfInsertions(),c),util.isTriplesEmpty(d)||(a.setRdfInsertions(util.triplesDifference(a.getRdfInsertions(),d)),c=util.triplesDifference(c,d),e=d),d=util.triplesIntersect(a.getRdfDeletions(),b),util.isTriplesEmpty(d)||(a.setRdfDeletions(util.triplesDifference(a.getRdfDeletions(),d)),b=util.triplesDifference(b,d),f=d),[a,b,c,f,e]},_processTurtleCommentedTripleOps:function(a){var b,c,d,e;for(e={},d={};b=a.match(/\n### (insert|delete) triple ### ([^\n]+ \.)$/);){switch(c=this._parseTurtle(b[2]),b[1]){case"insert":e=util.triplesUnion(e,c);break;case"delete":d=util.triplesUnion(d,c)}a=a.replace(b[0],"")}return[a,e,d]},_parseTurtleAndCommentedTripleOps:function(a){var b,c,d,e,f;return f=a,e=this._processTurtleCommentedTripleOps(a),a=e[0],c=e[1],b=e[2],util.isTriplesEmpty(c)&&util.isTriplesEmpty(b)||(d=this._parseTurtle(a),d&&(a=this._applyChangesToTurtle(a,d,c,b))),[a,this._parseTurtle(a)]},_parseTurtle:function(a){var b,c,d,e,f,g;c=new rdf.TurtleParser,b=null;try{if(c.parse(a))for(b=parserTriplesArrayToRdfJson(c.graph.toArray()),g=c.graph.toArray(),e=0,f=g.length;f>e;e++)if(d=g[e],!d.subject.nominalValue||!d.predicate.nominalValue)return[null,c]}catch(h){}return b},_ensureDoc:function(a){if(a instanceof HybridDoc)return a;if("object"==typeof a&&a.rdfJsonDoc)return HybridDoc.fromData(a);throw new Error("Snapshot must be a turtle + rdf-json hybrid document. Given: "+JSON.stringify(a))},_ensureOp:function(a){if(a instanceof HybridOp)return a;if("object"==typeof a&&a.textOps&&a.rdfInsertions&&a.rdfDeletions)return HybridOp.fromData(a);throw new Error("Operation must be a turtle + rdf-json hybrid operation. Given: "+JSON.stringify(a))}},"undefined"!=typeof WEB&&null!==WEB?(sharejs=window.sharejs,rdfJsonOT=sharejs.types["rdf-json"],textOT=sharejs.types.text,rdf=window.rdf,util=sharejs.rdfUtil,sharejs.types||(sharejs.types={}),sharejs.types["turtle-rdf-json"]=hybridOT):(textOT=require("../../node_modules/share/lib/types/text"),rdfJsonOT=require("./rdf-json"),rdf=require("node-rdf"),util=require("../util"),module.exports=hybridOT),hybridOT.exportTriples=rdfJsonOT.exportTriples;var hybridOT;"undefined"==typeof WEB&&(hybridOT=require("./hybrid")),hybridOT.api={provides:{text:!0,rdfJson:!0},getText:function(){return this.getTurtleData()},getTurtleData:function(){return this.snapshot.turtleContent},getRdfJsonData:function(){return hybridOT.exportTriples(this.snapshot.rdfJsonDoc.triples)},insert:function(a,b,c){var d;return d=new hybridOT.op([{p:a,i:b}],{},{}),this.submitOp(d,c),d},del:function(a,b,c){var d;return d=new hybridOT.op([{p:a,d:this.snapshot.slice(a,a+b)}],{},{}),this.submitOp(d,c),d},insertRdfJson:function(a,b){var c;return c=new hybridOT.op([],a,{}),this.submitOp(c,b),c},deleteRdfJson:function(a,b){var c;return c=new hybridOT.op([],{},a),this.submitOp(c,b),c},updateRdfJson:function(a,b,c){var d;return d=new hybridOT.op([],a,b),this.submitOp(d,c),d},_register:function(){return this.on("remoteop",function(a){var b,c,d,e,f;if(this.emit("rdf-update",a.rdfInsertions,a.rdfDeletions),this.emit("hybrid-update",a.textOps,a.rdfInsertions,a.rdfDeletions),a.textOps){for(e=a.textOps,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(void 0!==b.i?this.emit("insert",b.p,b.i):this.emit("delete",b.p,b.d));return f}})}};var SparkMD5,escapeLiteralValue,literalEscape,literalEscapeAll,literalReplacements,objectsEqual,rdf,sharejs,util;rdf=null,objectsEqual=function(a,b){return a.type!==b.type||a.value!==b.value?!1:(a.lang||b.lang)&&a.lang!==b.lang?!1:(a.datatype||b.datatype)&&a.datatype!==b.datatype?!1:!0},util={isTriplesEmpty:function(a){var b,c;for(b in a)return c=a[b],!1;return!0},cloneTriples:function(a){var b,c,d,e,f,g,h,i,j,k,l;j={};for(i in a){h=a[i],j[i]={};for(g in h)for(f=h[g],j[i][g]=[],k=0,l=f.length;l>k;k++){d=f[k],e={};for(b in d)c=d[b],e[b]=c;j[i][g].push(e)}}return j},triplesIntersect:function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o;c={};for(k in a)if(j=a[k],b[k])for(i in j)if(f=j[i],b[k][i]){for(g=b[k][i],h=[],l=0,n=f.length;n>l;l++)for(d=f[l],m=0,o=g.length;o>m;m++)e=g[m],d.type===e.type&&d.value===e.value&&d.lang===e.lang&&d.datatype===e.datatype&&h.push(d);h.length>0&&(c[k]||(c[k]={}),c[k][i]=h)}return c},triplesUnion:function(a,b){var c,d,e,f;return e={},d=function(a,b){var c,d,e,f,g,h,i,j;for(e=["type","value","lang","datatype"],g=0,i=a.length;i>g;g++){for(c=a[g],d=!0,h=0,j=e.length;j>h;h++)if(f=e[h],c[f]!==b[f]){d=!1;break}if(d)return!0}return!1},c=function(a,b,c){return e[a]||(e[a]={}),e[a][b]||(e[a][b]=[]),d(e[a][b],c)?void 0:e[a][b].push(c)},f=function(a,b){var c,d,e,f,g,h;h=[];for(g in a)f=a[g],h.push(function(){var a;a=[];for(e in f)d=f[e],a.push(function(){var a,f,h;for(h=[],a=0,f=d.length;f>a;a++)c=d[a],h.push(b(g,e,c));return h}());return a}());return h},f(a,c),f(b,c),e},triplesDifference:function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p;l={};for(k in a){j=a[k];for(i in j){if(f=j[i],h=[],b[k]&&b[k][i])for(g=b[k][i],m=0,o=f.length;o>m;m++){for(c=f[m],d=!1,n=0,p=g.length;p>n;n++)if(e=g[n],objectsEqual(c,e)){d=!0;break}d||h.push(c)}else h=f;h.length>0&&(l[k]||(l[k]={}),l[k][i]=h)}}return l},triplesContain:function(a,b,c,d){var e,f,g,h;if(!a[b]||!a[b][c])return!1;for(h=a[b][c],f=0,g=h.length;g>f;f++)if(e=h[f],objectsEqual(e,d))return!0;return!1},rdfJsonToArray:function(a){var b,c,d,e,f,g,h,i;b=[];for(g in a){f=a[g];for(e in f)for(d=f[e],h=0,i=d.length;i>h;h++)c=d[h],b.push({s:g,p:e,o:c})}return b},rdfJsonToTurtle:function(a){var b,c,d,e,f;for(c="",f=util.rdfJsonToArray(a),d=0,e=f.length;e>d;d++)b=f[d],c+=util.tripleToTurtle(b.s,b.p,b.o)+"\n";return c},tripleToTurtle:function(a,b,c){var d;switch(c.type){case"uri":d="<"+encodeURI(c.value)+">";break;case"bnode":d="_:"+c.value;break;default:d='"'+escapeLiteralValue(c.value)+'"',c.datatype&&(d+="^^"+c.datatype),c.lang&&(d+="@"+c.lang)}return"<"+encodeURI(a)+"> <"+encodeURI(b)+"> "+d+" ."}},literalEscape=/["\\\t\n\r\b\f]/,literalEscapeAll=/["\\\t\n\r\b\f]/g,literalReplacements={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"},escapeLiteralValue=function(a){return literalEscape.test(a)&&(a=a.replace(literalEscapeAll,function(a){return literalReplacements[a]})),a},"undefined"!=typeof WEB&&null!==WEB?(rdf=window.rdf,SparkMD5=window.SparkMD5,sharejs=window.sharejs,sharejs.rdfUtil=util):(rdf=require("node-rdf"),SparkMD5=require("spark-md5"),module.exports=util);